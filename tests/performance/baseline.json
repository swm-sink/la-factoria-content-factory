{
  "version": "1.0.0",
  "updated": "2025-07-31",
  "description": "Performance baseline metrics for La Factoria API",
  "environment": {
    "cpu": "2 vCPUs",
    "memory": "4GB RAM",
    "database": "PostgreSQL 15",
    "deployment": "Railway"
  },
  "endpoints": {
    "/healthz": {
      "description": "Root health check endpoint",
      "expected_response_time_ms": {
        "p50": 10,
        "p95": 50,
        "p99": 100,
        "max": 200
      },
      "expected_throughput_rps": 1000,
      "expected_error_rate": 0.001
    },
    "/api/v1/health": {
      "description": "API health check with authentication",
      "expected_response_time_ms": {
        "p50": 20,
        "p95": 100,
        "p99": 200,
        "max": 500
      },
      "expected_throughput_rps": 500,
      "expected_error_rate": 0.01
    },
    "/api/v1/auth/register": {
      "description": "User registration endpoint",
      "expected_response_time_ms": {
        "p50": 200,
        "p95": 500,
        "p99": 1000,
        "max": 2000
      },
      "expected_throughput_rps": 50,
      "expected_error_rate": 0.05,
      "notes": "Includes password hashing and database write"
    },
    "/api/v1/auth/login": {
      "description": "User login endpoint",
      "expected_response_time_ms": {
        "p50": 150,
        "p95": 400,
        "p99": 800,
        "max": 1500
      },
      "expected_throughput_rps": 100,
      "expected_error_rate": 0.1,
      "notes": "Includes password verification and token generation"
    },
    "/api/v1/jobs [POST]": {
      "description": "Create content generation job",
      "expected_response_time_ms": {
        "p50": 100,
        "p95": 300,
        "p99": 500,
        "max": 1000
      },
      "expected_throughput_rps": 50,
      "expected_error_rate": 0.02,
      "notes": "Async job creation, returns immediately"
    },
    "/api/v1/jobs/{id} [GET]": {
      "description": "Check job status",
      "expected_response_time_ms": {
        "p50": 50,
        "p95": 150,
        "p99": 300,
        "max": 500
      },
      "expected_throughput_rps": 200,
      "expected_error_rate": 0.01
    },
    "/api/v1/jobs [GET]": {
      "description": "List jobs with pagination",
      "expected_response_time_ms": {
        "p50": 100,
        "p95": 300,
        "p99": 600,
        "max": 1000
      },
      "expected_throughput_rps": 100,
      "expected_error_rate": 0.01,
      "notes": "Performance varies with page size"
    },
    "/api/v1/content/generate": {
      "description": "Direct content generation (synchronous)",
      "expected_response_time_ms": {
        "p50": 2000,
        "p95": 5000,
        "p99": 10000,
        "max": 30000
      },
      "expected_throughput_rps": 10,
      "expected_error_rate": 0.05,
      "notes": "Depends heavily on content size and type, cache hits are much faster"
    },
    "/api/v1/monitoring/usage/user/{id}": {
      "description": "Get user usage statistics",
      "expected_response_time_ms": {
        "p50": 100,
        "p95": 300,
        "p99": 500,
        "max": 1000
      },
      "expected_throughput_rps": 50,
      "expected_error_rate": 0.01
    },
    "/api/v1/monitoring/usage/summary": {
      "description": "Get overall usage summary (admin)",
      "expected_response_time_ms": {
        "p50": 200,
        "p95": 500,
        "p99": 1000,
        "max": 2000
      },
      "expected_throughput_rps": 20,
      "expected_error_rate": 0.01,
      "notes": "Aggregates data across all users"
    }
  },
  "load_scenarios": {
    "normal_load": {
      "users": 50,
      "duration_minutes": 10,
      "expected_metrics": {
        "total_rps": 100,
        "error_rate": 0.01,
        "cpu_usage": 0.5,
        "memory_usage": 0.6
      }
    },
    "peak_load": {
      "users": 200,
      "duration_minutes": 5,
      "expected_metrics": {
        "total_rps": 300,
        "error_rate": 0.02,
        "cpu_usage": 0.8,
        "memory_usage": 0.75
      }
    },
    "stress_test": {
      "users": 500,
      "duration_minutes": 3,
      "expected_metrics": {
        "total_rps": 500,
        "error_rate": 0.05,
        "cpu_usage": 0.95,
        "memory_usage": 0.85,
        "notes": "Some rate limiting expected"
      }
    }
  },
  "thresholds": {
    "critical": {
      "response_time_p99_ms": 5000,
      "error_rate": 0.1,
      "cpu_usage": 0.9,
      "memory_usage": 0.9
    },
    "warning": {
      "response_time_p95_ms": 2000,
      "error_rate": 0.05,
      "cpu_usage": 0.7,
      "memory_usage": 0.7
    }
  },
  "external_dependencies": {
    "gemini_api": {
      "expected_latency_ms": {
        "p50": 1000,
        "p95": 3000,
        "p99": 5000
      },
      "rate_limit": "60 requests/minute"
    },
    "elevenlabs_api": {
      "expected_latency_ms": {
        "p50": 2000,
        "p95": 5000,
        "p99": 10000
      },
      "rate_limit": "varies by plan"
    },
    "firestore": {
      "expected_latency_ms": {
        "read_p50": 10,
        "read_p99": 50,
        "write_p50": 20,
        "write_p99": 100
      }
    }
  }
}